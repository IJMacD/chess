(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{14:function(e,t,r){},15:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(3),i=r.n(o),u=(r(14),r(1)),s=r(4),c=r(5),l=r(7),m=r(6),f=r(8);r(15);function v(e){return String.fromCharCode(97+e)}function b(e){return e.charCodeAt(0)-97}function h(e){return String(8-e)}function N(e){return 8-+e}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"K":return t?"\u265b":"\u2655";case"Q":return t?"\u265a":"\u2654";case"B":return t?"\u265d":"\u2657";case"N":return t?"\u265e":"\u2658";case"R":return t?"\u265c":"\u2656";default:return t?"\u265f":"\u2659"}}function k(e){return["\u265c","\u265e","\u265d","\u265a","\u265b","\u265f"].includes(e)?"black":["\u2656","\u2658","\u2657","\u2654","\u2655","\u2659"].includes(e)?"white":void 0}function g(e,t){return{fileName:e,rankName:t,fileNumber:b(e),rankNumber:N(t)}}function p(e,t){return{fileNumber:e,rankNumber:t,fileName:v(e),rankName:h(t)}}var E=/([KQBNR]?)([a-h]?)([1-8]?)x?([a-h])([1-8])(?:=([QBNR]))?/;function w(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("O-O"!==t)if("O-O-O"!==t){if(E.test(t)){var a,n=E.exec(t),o=Object(u.a)(n,7),i=(o[0],o[1]),s=o[2],c=o[3],l=o[4],m=o[5],f=o[6],v=d(i,r),h=g(l,m);if(s&&c){if(a=g(s,c),!C(e,a,h))throw Error("Invalid Move: ".concat(v,": ").concat(s).concat(c," -> ").concat(l).concat(m))}else{if(!(a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=[];if(r&&a){var o=g(r,a);e[o.rankNumber][o.fileNumber]&&n.push(o)}else if(r)for(var i=b(r),u=0;u<8;u++)e[u][i]===t&&n.push(p(i,u));else if(a)for(var s=N(a),c=0;c<8;c++)e[s][c]===t&&n.push(p(c,s));else for(var l=0;l<8;l++)for(var m=0;m<8;m++)e[l][m]===t&&n.push(p(m,l));return n}(e,v,s,c).find((function(t){return C(e,t,h)}))))throw Error("Invalid Move: ".concat(v,": -> ").concat(l).concat(m));s=a.fileName,c=a.rankName}if(f)if(r&&""===i&&"1"===h.rankName)v=d(f,!0);else{if(r||""!==i||"8"!==h.rankName)throw Error("Illegal promotion");v=d(f,!1)}e[a.rankNumber][a.fileNumber]="",e[h.rankNumber][h.fileNumber]=v}}else if(r){if("\u265c"!==e[0][0]||""!==e[0][1]||""!==e[0][2]||""!==e[0][3]||"\u265b"!==e[0][4])throw Error("Illegal Castling");e[0][0]="",e[0][2]="\u265b",e[0][3]="\u265c",e[0][4]=""}else{if("\u2656"!==e[7][0]||""!==e[7][1]||""!==e[7][2]||""!==e[7][3]||"\u2655"!==e[7][4])throw Error("Illegal Castling");e[7][0]="",e[7][2]="\u2655",e[7][3]="\u2656",e[7][4]=""}else if(r){if("\u265b"!==e[0][4]||""!==e[0][5]||""!==e[0][6]||"\u265c"!==e[0][7])throw Error("Illegal Castling");e[0][4]="",e[0][5]="\u265c",e[0][6]="\u265b",e[0][7]=""}else{if("\u2655"!==e[7][4]||""!==e[7][5]||""!==e[7][6]||"\u2656"!==e[7][7])throw Error("Illegal Castling");e[7][4]="",e[7][5]="\u2656",e[7][6]="\u2655",e[7][7]=""}}function C(e,t,r){var a=e[t.rankNumber][t.fileNumber],n=e[r.rankNumber][r.fileNumber];if(!a)return!1;var o=k(a);if(o===k(n))return!1;var i=function(e){switch(e){case"\u265b":case"\u2655":return"K";case"\u265a":case"\u2654":return"Q";case"\u265d":case"\u2657":return"B";case"\u265e":case"\u2658":return"N";case"\u265c":case"\u2656":return"R";case"\u265f":case"\u2659":return""}return!1}(a),u=r.rankNumber-t.rankNumber,s=r.fileNumber-t.fileNumber,c=Math.abs(u),l=Math.abs(s);switch(i){case"":if(n)return 1===l&&1===c;if(t.fileName!==r.fileName)return!1;if("white"===o)return"2"===t.rankName&&-2===u||-1===u;if("black"===o)return"7"===t.rankName&&2===u||1===u;break;case"Q":return M(e,t,r)&&(0===u||0===s||c===l);case"N":return 2===l&&1===c||1===l&&2===c;case"R":return M(e,t,r)&&(0===u||0===s);case"K":return c<=1&&l<=1;case"B":return M(e,t,r)&&c===l}}function M(e,t,r){for(var a=r.rankNumber-t.rankNumber,n=r.fileNumber-t.fileNumber,o=Math.abs(a),i=Math.abs(n),u=Math.sign(a),s=Math.sign(n),c=1;c<Math.max(i,o);c++){var l=t.fileNumber+c*s;if(""!==e[t.rankNumber+c*u][l])return!1}return!0}var I="chess_move_history",O=/\d+\. *([^\s]+)(?: +([^\s]+))?/g,x=function(e){function t(e){var r;Object(s.a)(this,t),r=Object(l.a)(this,Object(m.a)(t).call(this,e));var a=localStorage.getItem(I)||"";return r.state={moves:a,moveNumber:0},r}return Object(f.a)(t,e),Object(c.a)(t,[{key:"updateMoves",value:function(e){var t=y(this.state.moves),r=this.state.moveNumber;t===r&&(r=y(e)),this.setState({moves:e,moveNumber:r})}},{key:"componentDidUpdate",value:function(e,t){localStorage.setItem(I,this.state.moves),this.state.moves!==t.moves&&this.setState({moveNumber:y(this.state.moves)})}},{key:"render",value:function(){var e,t,r=this,a=this.state,o=a.moves,i=a.moveNumber,s=y(o),c=[["\u265c","\u265e","\u265d","\u265a","\u265b","\u265d","\u265e","\u265c"],["\u265f","\u265f","\u265f","\u265f","\u265f","\u265f","\u265f","\u265f"],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["\u2659","\u2659","\u2659","\u2659","\u2659","\u2659","\u2659","\u2659"],["\u2656","\u2658","\u2657","\u2654","\u2655","\u2657","\u2658","\u2656"]],l=0;try{for(O.lastIndex=0;e=O.exec(o);){var m=e,f=Object(u.a)(m,3),b=(f[0],f[1]),h=f[2];if(++l>this.state.moveNumber)break;w(c,b,!1),h&&w(c,h,!0)}}catch(N){N.message="Move ".concat(l," - ").concat(N.message),t=N}return n.a.createElement("div",{className:"App"},n.a.createElement("table",{className:"App-Board"},n.a.createElement("tbody",null,c.map((function(e,t){return n.a.createElement("tr",{key:t+1},e.map((function(e,r){var a=(t%2+r)%2?"black-square":"white-square";return n.a.createElement("td",{key:v(r),className:a},e)})))})))),n.a.createElement("div",{className:"App-moves"},n.a.createElement("div",null,n.a.createElement("button",{onClick:function(){return r.setState({moveNumber:0})},disabled:i<=0},"First"),n.a.createElement("button",{onClick:function(){return r.setState({moveNumber:i-1})},disabled:i<=0},"Prev"),n.a.createElement("button",{onClick:function(){return r.setState({moveNumber:i+1})},disabled:i>=s},"Next"),n.a.createElement("button",{onClick:function(){return r.setState({moveNumber:s})},disabled:i>=s},"Last"),"Move number: ",i),n.a.createElement("textarea",{value:o,onChange:function(e){return r.updateMoves(e.target.value)}})),t&&n.a.createElement("div",{className:"App-error"},t.message))}}]),t}(n.a.Component);function y(e){return O.lastIndex=0,function(e,t){var r,a=[];for(;r=e.exec(t);)a.push(r);return a}(O,e).length}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,r){e.exports=r(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.158b6fdb.chunk.js.map