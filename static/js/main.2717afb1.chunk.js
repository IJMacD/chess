(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{14:function(e,t,r){},15:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(3),s=r.n(o),i=(r(14),r(1)),u=r(4),c=r(5),l=r(7),m=r(6),f=r(8);r(15);function v(e){return String.fromCharCode(97+e)}function h(e){return e.charCodeAt(0)-97}function b(e){return String(8-e)}function N(e){return 8-+e}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"K":return t?"\u265b":"\u2655";case"Q":return t?"\u265a":"\u2654";case"B":return t?"\u265d":"\u2657";case"N":return t?"\u265e":"\u2658";case"R":return t?"\u265c":"\u2656";default:return t?"\u265f":"\u2659"}}function k(e){return["\u265c","\u265e","\u265d","\u265a","\u265b","\u265f"].includes(e)?"black":["\u2656","\u2658","\u2657","\u2654","\u2655","\u2659"].includes(e)?"white":void 0}function g(e,t){return{fileName:e,rankName:t,fileNumber:h(e),rankNumber:N(t)}}function p(e,t){return{fileNumber:e,rankNumber:t,fileName:v(e),rankName:b(t)}}var E=/([KQBNR]?)([a-h]?)([1-8]?)x?([a-h])([1-8])(?:=([QBNR]))?/;function w(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("O-O"!==t)if("O-O-O"!==t){if(E.test(t)){var a,n=E.exec(t),o=Object(i.a)(n,7),s=(o[0],o[1]),u=o[2],c=o[3],l=o[4],m=o[5],f=o[6],v=d(s,r),b=g(l,m);if(u&&c){if(a=g(u,c),!M(e,a,b))throw Error("Invalid Move: ".concat(v,": ").concat(u).concat(c," -> ").concat(l).concat(m))}else{if(!(a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=[];if(r&&a){var o=g(r,a);e[o.rankNumber][o.fileNumber]&&n.push(o)}else if(r)for(var s=h(r),i=0;i<8;i++)e[i][s]===t&&n.push(p(s,i));else if(a)for(var u=N(a),c=0;c<8;c++)e[u][c]===t&&n.push(p(c,u));else for(var l=0;l<8;l++)for(var m=0;m<8;m++)e[l][m]===t&&n.push(p(m,l));return n}(e,v,u,c).find((function(t){return M(e,t,b)}))))throw Error("Invalid Move: ".concat(v,": -> ").concat(l).concat(m));u=a.fileName,c=a.rankName}if(f)if(r&&""===s&&"1"===b.rankName)v=d(f,!0);else{if(r||""!==s||"8"!==b.rankName)throw Error("Illegal promotion");v=d(f,!1)}e[a.rankNumber][a.fileNumber]="",e[b.rankNumber][b.fileNumber]=v}}else if(r){if("\u265c"!==e[0][0]||""!==e[0][1]||""!==e[0][2]||""!==e[0][3]||"\u265b"!==e[0][4])throw Error("Illegal Castling");e[0][0]="",e[0][2]="\u265b",e[0][3]="\u265c",e[0][4]=""}else{if("\u2656"!==e[7][0]||""!==e[7][1]||""!==e[7][2]||""!==e[7][3]||"\u2655"!==e[7][4])throw Error("Illegal Castling");e[7][0]="",e[7][2]="\u2655",e[7][3]="\u2656",e[7][4]=""}else if(r){if("\u265b"!==e[0][4]||""!==e[0][5]||""!==e[0][6]||"\u265c"!==e[0][7])throw Error("Illegal Castling");e[0][4]="",e[0][5]="\u265c",e[0][6]="\u265b",e[0][7]=""}else{if("\u2655"!==e[7][4]||""!==e[7][5]||""!==e[7][6]||"\u2656"!==e[7][7])throw Error("Illegal Castling");e[7][4]="",e[7][5]="\u2656",e[7][6]="\u2655",e[7][7]=""}}function M(e,t,r){var a=e[t.rankNumber][t.fileNumber],n=e[r.rankNumber][r.fileNumber];if(!a)return!1;var o=k(a);if(o===k(n))return!1;var s=function(e){switch(e){case"\u265b":case"\u2655":return"K";case"\u265a":case"\u2654":return"Q";case"\u265d":case"\u2657":return"B";case"\u265e":case"\u2658":return"N";case"\u265c":case"\u2656":return"R";case"\u265f":case"\u2659":return""}return!1}(a),i=r.rankNumber-t.rankNumber,u=r.fileNumber-t.fileNumber,c=Math.abs(i),l=Math.abs(u);switch(s){case"":if(n)return 1===l&&1===c;if(t.fileName!==r.fileName)return!1;if("white"===o)return"2"===t.rankName&&-2===i||-1===i&&Math.abs(u)<=1;if("black"===o)return"7"===t.rankName&&2===i||1===i&&Math.abs(u)<=1;break;case"Q":return C(e,t,r)&&(0===i||0===u||c===l);case"N":return 2===l&&1===c||1===l&&2===c;case"R":return C(e,t,r)&&(0===i||0===u);case"K":return c<=1&&l<=1;case"B":return C(e,t,r)&&c===l}}function C(e,t,r){for(var a=r.rankNumber-t.rankNumber,n=r.fileNumber-t.fileNumber,o=Math.abs(a),s=Math.abs(n),i=Math.sign(a),u=Math.sign(n),c=1;c<Math.max(s,o);c++){var l=t.fileNumber+c*u;if(""!==e[t.rankNumber+c*i][l])return!1}return!0}var I="chess_move_history",O=/\d+\. *([^ ]+)(?: +([^ ]+))?/g,S=function(e){function t(e){var r;Object(u.a)(this,t),r=Object(l.a)(this,Object(m.a)(t).call(this,e));var a=localStorage.getItem(I)||"";return r.state={board:[["\u265c","\u265e","\u265d","\u265a","\u265b","\u265d","\u265e","\u265c"],["\u265f","\u265f","\u265f","\u265f","\u265f","\u265f","\u265f","\u265f"],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["\u2659","\u2659","\u2659","\u2659","\u2659","\u2659","\u2659","\u2659"],["\u2656","\u2658","\u2657","\u2654","\u2655","\u2657","\u2658","\u2656"]],moves:a,error:null,moveNumber:0},setTimeout((function(){return r.doMoves(a)}),10),r}return Object(f.a)(t,e),Object(c.a)(t,[{key:"doMoves",value:function(e){O.lastIndex=0;var t,r=[["\u265c","\u265e","\u265d","\u265a","\u265b","\u265d","\u265e","\u265c"],["\u265f","\u265f","\u265f","\u265f","\u265f","\u265f","\u265f","\u265f"],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["\u2659","\u2659","\u2659","\u2659","\u2659","\u2659","\u2659","\u2659"],["\u2656","\u2658","\u2657","\u2654","\u2655","\u2657","\u2658","\u2656"]],a=0;try{for(;t=O.exec(e);){var n=t,o=Object(i.a)(n,3),s=(o[0],o[1]),u=o[2];if(++a>this.state.moveNumber)break;w(r,s,!1),u&&w(r,u,!0)}}catch(c){c.message="Move ".concat(a," - ").concat(c.message),this.setState({error:c})}this.setState({board:r})}},{key:"componentDidUpdate",value:function(e,t){localStorage.setItem(I,this.state.moves),this.state.moves!==t.moves&&this.setState({moveNumber:x(this.state.moves)}),this.state.moveNumber!==t.moveNumber&&this.doMoves(this.state.moves)}},{key:"render",value:function(){var e=this,t=this.state,r=t.moves,a=t.moveNumber,o=x(r);return n.a.createElement("div",{className:"App"},n.a.createElement("table",{className:"App-Board"},n.a.createElement("tbody",null,this.state.board.map((function(e,t){return n.a.createElement("tr",{key:t+1},e.map((function(e,r){var a=(t%2+r)%2?"black-square":"white-square";return n.a.createElement("td",{key:v(r),className:a},e)})))})))),n.a.createElement("div",{className:"App-moves"},n.a.createElement("div",null,n.a.createElement("button",{onClick:function(){return e.setState({moveNumber:0})},disabled:a<=0},"First"),n.a.createElement("button",{onClick:function(){return e.setState({moveNumber:a-1})},disabled:a<=0},"Prev"),n.a.createElement("button",{onClick:function(){return e.setState({moveNumber:a+1})},disabled:a>=o},"Next"),n.a.createElement("button",{onClick:function(){return e.setState({moveNumber:o})},disabled:a>=o},"Last"),"Move number: ",a),n.a.createElement("textarea",{value:r,onChange:function(t){return e.setState({moves:t.target.value,error:null})}})),this.state.error&&n.a.createElement("div",{className:"App-error"},this.state.error.message))}}]),t}(n.a.Component);function x(e){return O.lastIndex=0,function(e,t){var r,a=[];for(;r=e.exec(t);)a.push(r);return a}(O,e).length}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,r){e.exports=r(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.2717afb1.chunk.js.map